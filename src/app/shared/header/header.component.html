<header class="topbar">
	<div class="topbar-content">
		<a class="topbar-brand" routerLink="/">
			<img src="assets/img/logo-nb.png" alt="EnerTEF Logo" class="brand-logo" />
		</a>

		<!-- Logged OUT -->
		<div class="topbar-actions" *ngIf="!loggedIn">
			<!-- Demo Role Selector for Login -->
			<div class="demo-role-selector">
				<select [(ngModel)]="selectedDemoRole" class="role-select">
					<option *ngFor="let role of availableRoles" [value]="role.value">
						{{role.label}}
					</option>
				</select>
			</div>
			<button class="btn btn--ghost btn--sm" (click)="login()">
				<i class="fas fa-sign-in-alt"></i> Demo Login
			</button>
			<button class="btn btn--primary btn--sm">
				<i class="fas fa-user-plus"></i> Register
			</button>
		</div>

		<!-- Logged IN -->
		<div class="topbar-actions" *ngIf="loggedIn">
			<!-- Current Role Display -->
			<div class="current-role">
				<button class="role-toggle" (click)="toggleRoleMenu()">
					<span class="role-label">{{getCurrentRoleLabel()}}</span>
					<i class="fas fa-chevron-down"></i>
				</button>
				<div class="role-dropdown" [class.show]="roleMenuOpen">
					<div class="dropdown-header">Switch Role (Demo)</div>
					<button 
						*ngFor="let role of availableRoles" 
						class="dropdown-item"
						[class.active]="currentUser.roles.includes(role.value)"
						(click)="switchToRole(role.value)">
						{{role.label}}
					</button>
				</div>
			</div>

			<!-- User Menu -->
			<div class="user-menu">
				<button class="user-menu-toggle" (click)="toggleUserMenu()">
					<div class="user-avatar"><i class="fas fa-user"></i></div>
					<span class="user-name">{{currentUser.name}}</span>
					<i class="fas fa-chevron-down"></i>
				</button>
				<div class="user-dropdown" [class.show]="userMenuOpen">
					<div class="dropdown-header">{{currentUser.email}}</div>
										<a routerLink="/profile" class="dropdown-item"><i class="fas fa-user-circle"></i> Profile</a>
					<a routerLink="/profile" class="dropdown-item"><i class="fas fa-cog"></i> Settings</a>					
					<a routerLink="/typography" class="dropdown-item"><i class="fas fa-chart-bar"></i>Dashboard</a>
					<a routerLink="/components" class="dropdown-item"><i class="fas fa-comments"></i>Messages / Notifications<span class="notification-badge">3</span></a>
					<a routerLink="/auth" class="dropdown-item"><i class="fas fa-cog"></i>Profile & Settings</a>
					<a routerLink="/payments" class="dropdown-item"><i class="fas fa-credit-card"></i>Billing / Wallet</a>
					<div class="dropdown-divider"></div>
					<button class="dropdown-item text-danger" (click)="logout()"><i class="fas fa-sign-out-alt"></i> Logout</button>
				</div>
			</div>
		</div>

		<button class="mobile-menu-toggle">
			<i class="fas fa-bars"></i>
		</button>
	</div>
</header>
